<mat-card class="rental-card">
  <mat-card-header>
    <mat-card-title>
        <mat-form-field *ngIf="editAddress">
          <input matInput placeholder="Street" name="street" [(ngModel)]="streetAddress">
        </mat-form-field>
        <span *ngIf="!editAddress"><h2 style="display:inline-block;">{{streetAddress}}</h2></span>
        <mat-slide-toggle class="edit-toggle" [(ngModel)]="editAddress">Edit Address</mat-slide-toggle>
    </mat-card-title>
    <mat-card-subtitle *ngIf="editAddress">
        <mat-form-field>
          <input matInput placeholder="City" name="city" [(ngModel)]="cityAddress">
        </mat-form-field>,&nbsp;
        <mat-form-field class="short-input">
          <mat-select [(value)]="stateAddress" placeholder="State">
              <mat-option *ngFor="let state of stateList" [value]="state">
                {{state}}
              </mat-option>
          </mat-select>
        </mat-form-field>,&nbsp;
        <mat-form-field class="short-input">
          <input matInput placeholder="Zip Code" name="zip" [(ngModel)]="zipAddress">
        </mat-form-field>
    </mat-card-subtitle>
    <mat-card-subtitle *ngIf="!editAddress">
        <span><h3>{{cityAddress}},&nbsp;{{stateAddress}},&nbsp;{{zipAddress}}</h3></span>
    </mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <span class="outflow"><p>outflow</p><h4>{{monthlyOutflow | currency}} / mo.</h4></span>
    <span class="income" [class.positive]="monthlyIncome>0"><p>income</p><h4>{{monthlyIncome | currency}} / mo.</h4></span>
    <span class="yield" [class.positive]="yield>0"><p>yield</p><h4>{{yield | percent:'1.2-2'}}</h4></span>
    <mat-tab-group>
        <mat-tab label="Market">
              <p>
                <mat-form-field class="card-input">
                  <span matPrefix>$ &nbsp;</span>
                  <input matInput placeholder="Price" name="price" [(ngModel)]="price" (blur)="updatePerformance()">
                </mat-form-field>
                <mat-form-field class="card-input">
                  <span matPrefix>$ &nbsp;</span>
                  <input matInput placeholder="Rent Estimate" name="rent" [(ngModel)]="rent" (blur)="updatePerformance()">
                </mat-form-field>
              </p>
              <p>
                <mat-form-field class="card-input">
                  <span matPrefix>$ &nbsp;</span>
                  <input matInput placeholder="HOA" name="hoa" [(ngModel)]="hoa" (blur)="updatePerformance()">
                </mat-form-field>
                <mat-form-field class="card-input">
                  <span matPrefix>$ &nbsp;</span>
                  <input matInput placeholder="Mello-Roos" name="melloRoos" [(ngModel)]="melloRoos" (blur)="updatePerformance()">
                </mat-form-field>
              </p>
        </mat-tab>
        <mat-tab label="Assumptions"> 
            <!-- Add purchase date -->
            <p>
              <mat-form-field class="card-input">
                <input matInput placeholder="Income Tax Rate" name="salaryTaxRate" 
                      [ngModel]="salaryTaxRateOverride*100 | number:'1.0-0'" (blur)="salaryTaxRateOverride=$event.target.value/100;updatePerformance();">
              </mat-form-field>%
              <span class="assumption-default">&nbsp;(default: {{salaryTaxRateDefault | percent}})</span>
            </p>
            <p>
              <mat-form-field class="card-input">
                <input matInput placeholder="Interest Rate" name="interestRate" 
                      [ngModel]="interestRateOverride*100 | number:'1.1-4'" (blur)="interestRateOverride=$event.target.value/100;updatePerformance();">
              </mat-form-field>%
              <span class="assumption-default">&nbsp;(default: {{interestRateDefault | percent:'1.1-4'}})</span>
            </p>
            <p>
              <mat-form-field class="card-input">
                <input matInput placeholder="Loan Term" name="loanTerm" 
                      [ngModel]="loanTermOverride" (blur)="loanTermOverride=$event.target.value;updatePerformance();">
              </mat-form-field>mo.
              <span class="assumption-default" style="margin-left:24px;">(default: {{loanTermDefault}} months)</span>
            </p>
            <p>
              <mat-form-field class="card-input">
                <input matInput placeholder="Down Payment" name="downPayment" 
                      [ngModel]="downPaymentOverride*100 | number:'1.0-0'" (blur)="downPaymentOverride=$event.target.value/100;updatePerformance();">
              </mat-form-field>%
              <span class="assumption-default">&nbsp;(default: {{downPaymentDefault | percent}})</span>
            </p>
            <p>
              <mat-form-field class="card-input">
                <input matInput placeholder="Property Rate" name="propertyTaxRate" 
                      [ngModel]="propertyTaxRateOverride*100 | number:'1.3-4'" (blur)="propertyTaxRateOverride=$event.target.value/100;updatePerformance();">
              </mat-form-field>%
              <span class="assumption-default">&nbsp;(default: {{propertyTaxRateDefault | percent:'1.3-4'}})</span>
            </p>
            <p>
              <mat-form-field class="card-input">
                <input matInput placeholder="Insurance Rate" name="insuranceRate" 
                      [ngModel]="insuranceRateOverride*100 | number:'1.2-3'" (blur)="insuranceRateOverride=$event.target.value/100;updatePerformance();">
              </mat-form-field>%
              <span class="assumption-default">&nbsp;(default: {{insuranceRateDefault | percent:'1.2-3'}})</span>
            </p>
            <p>
              <mat-form-field class="card-input">
                <input matInput placeholder="Maintenance Rate" name="salaryTaxRate" 
                      [ngModel]="maintenanceRateOverride*100| number:'1.2-3'" (blur)="maintenanceRateOverride=$event.target.value/100;updatePerformance();">
              </mat-form-field>%
              <span class="assumption-default">&nbsp;(default: {{maintenanceRateDefault | percent:'1.2-3'}})</span>
            </p>
            <button mat-raised-button color="primary" (click)="editGlobal()">Edit Default Assumptions</button>
            <div *ngIf="showGlobal">
                <p>
                    <mat-form-field class="card-input">
                      <input matInput placeholder="Default Income Tax Rate" name="salaryTaxRate" 
                            [ngModel]="salaryTaxRateDefault*100 | number:'1.0-0'" (blur)="salaryTaxRateDefault=$event.target.value/100;updatePerformance();">
                    </mat-form-field>%
                    <span class="assumption-default">&nbsp;{{salaryTaxRateOriginal | percent}}</span>
                  </p>
                  <p>
                    <mat-form-field class="card-input">
                      <input matInput placeholder="Default Interest Rate" name="interestRate" 
                            [ngModel]="interestRateDefault*100 | number:'1.1-4'" (blur)="interestRateDefault=$event.target.value/100;updatePerformance();">
                    </mat-form-field>%
                    <span class="assumption-default">&nbsp;{{interestRateOriginal | percent:'1.1-4'}}</span>
                  </p>
                  <p>
                    <mat-form-field class="card-input">
                      <input matInput placeholder="Default Loan Term" name="loanTerm" 
                            [ngModel]="loanTermDefault" (blur)="loanTermDefault=$event.target.value;updatePerformance();">
                    </mat-form-field>mo.
                    <span class="assumption-default" style="margin-left:24px;">{{loanTermOriginal}} months</span>
                  </p>
                  <p>
                    <mat-form-field class="card-input">
                      <input matInput placeholder="Default Down Payment" name="downPayment" 
                            [ngModel]="downPaymentDefault*100 | number:'1.0-0'" (blur)="downPaymentDefault=$event.target.value/100;updatePerformance();">
                    </mat-form-field>%
                    <span class="assumption-default">&nbsp;{{downPaymentOriginal | percent}}</span>
                  </p>
                  <p>
                    <mat-form-field class="card-input">
                      <input matInput placeholder="Default Property Rate" name="propertyTaxRate" 
                            [ngModel]="propertyTaxRateDefault*100 | number:'1.3-4'" (blur)="propertyTaxRateDefault=$event.target.value/100;updatePerformance();">
                    </mat-form-field>%
                    <span class="assumption-default">&nbsp;{{propertyTaxRateOriginal | percent:'1.3-4'}}</span>
                  </p>
                  <p>
                    <mat-form-field class="card-input">
                      <input matInput placeholder="Default Insurance Rate" name="insuranceRate" 
                            [ngModel]="insuranceRateDefault*100 | number:'1.2-3'" (blur)="insuranceRateDefault=$event.target.value/100;updatePerformance();">
                    </mat-form-field>%
                    <span class="assumption-default">&nbsp;{{insuranceRateOriginal | percent:'1.2-3'}}</span>
                  </p>
                  <p>
                    <mat-form-field class="card-input">
                      <input matInput placeholder="Default Maintenance Rate" name="salaryTaxRate" 
                            [ngModel]="maintenanceRateDefault*100 | number:'1.2-3'" (blur)="maintenanceRateDefault=$event.target.value/100;updatePerformance();">
                    </mat-form-field>%
                    <span class="assumption-default">&nbsp;{{maintenanceRateOriginal | percent:'1.2-3'}}</span>
                  </p>
                  <button mat-raised-button color="accent"  (click)="updateGlobal()">Submit Default Assumptions</button>
            </div>
        </mat-tab>
        <mat-tab label="Details"> 
            <!-- Down Payment required -->

            <!-- Expense (monthly / annually -->
              <!-- Cash outflow monthly -->
                <!-- Mortgage Payment -->
                <!-- Property Tax (monthly / annual) -->
                <!-- HOA & MelloRoos (monthly / annual) -->
                <!-- Maintenance estimate (monthly / annual) -->
                <!-- Insurance estimate (monthly / annual) -->
              <!-- Tax Savings Writeoff (monthly / annual) -->
                <!-- Interest Writeoff (monthly / annual) -->
                <!-- Property Tax Writeoff estimate (monthly / annual) -->
            
            <!-- Mortgage Payment-->
              <p>Mortgage Payment: {{monthlyPayment | currency}} / month</p>
              <p>&nbsp;Principal&nbsp;: {{monthlyPrincipal | currency }}&nbsp;&nbsp;Interest&nbsp;: {{monthlyInterest | currency }}</p> 
              <!-- Loan Term -->
              <!-- Ammortization table (term, interest, principal, balance)-->
        </mat-tab>
      </mat-tab-group>
  </mat-card-content>
</mat-card>